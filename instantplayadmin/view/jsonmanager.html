<!-- BEGIN CONTAINER -->
<div class="page-container">
    <!-- BEGIN SIDEBAR -->

    {include /layout/left.html}


    <!-- END SIDEBAR -->
    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <div class="page-content">
            <!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
            <div class="modal fade" id="portlet-config" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <h4 class="modal-title">Modal title</h4>
                        </div>
                        <div class="modal-body">
                            Widget settings form goes here
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn blue">Save changes</button>
                            <button type="button" class="btn default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
            <!-- /.modal -->
            <!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
            <!-- BEGIN STYLE CUSTOMIZER -->
            <div class="theme-panel hidden-xs hidden-sm">
                <div class="toggler">
                </div>
                <div class="toggler-close">
                </div>
                <div class="theme-options">
                    <div class="theme-option theme-colors clearfix">
						<span>
						THEME COLOR </span>
                        <ul>
                            <li class="color-default current tooltips" data-style="default" data-container="body" data-original-title="Default">
                            </li>
                            <li class="color-darkblue tooltips" data-style="darkblue" data-container="body" data-original-title="Dark Blue">
                            </li>
                            <li class="color-blue tooltips" data-style="blue" data-container="body" data-original-title="Blue">
                            </li>
                            <li class="color-grey tooltips" data-style="grey" data-container="body" data-original-title="Grey">
                            </li>
                            <li class="color-light tooltips" data-style="light" data-container="body" data-original-title="Light">
                            </li>
                            <li class="color-light2 tooltips" data-style="light2" data-container="body" data-html="true" data-original-title="Light 2">
                            </li>
                        </ul>
                    </div>
                    <div class="theme-option">
						<span>
						Theme Style </span>
                        <select class="layout-style-option form-control input-sm">
                            <option value="square" selected="selected">Square corners</option>
                            <option value="rounded">Rounded corners</option>
                        </select>
                    </div>
                    <div class="theme-option">
						<span>
						Layout </span>
                        <select class="layout-option form-control input-sm">
                            <option value="fluid" selected="selected">Fluid</option>
                            <option value="boxed">Boxed</option>
                        </select>
                    </div>
                    <div class="theme-option">
						<span>
						Header </span>
                        <select class="page-header-option form-control input-sm">
                            <option value="fixed" selected="selected">Fixed</option>
                            <option value="default">Default</option>
                        </select>
                    </div>
                    <div class="theme-option">
						<span>
						Top Menu Dropdown</span>
                        <select class="page-header-top-dropdown-style-option form-control input-sm">
                            <option value="light" selected="selected">Light</option>
                            <option value="dark">Dark</option>
                        </select>
                    </div>
                    <div class="theme-option">
						<span>
						Sidebar Mode</span>
                        <select class="sidebar-option form-control input-sm">
                            <option value="fixed">Fixed</option>
                            <option value="default" selected="selected">Default</option>
                        </select>
                    </div>
                    <div class="theme-option">
						<span>
						Sidebar Menu </span>
                        <select class="sidebar-menu-option form-control input-sm">
                            <option value="accordion" selected="selected">Accordion</option>
                            <option value="hover">Hover</option>
                        </select>
                    </div>
                    <div class="theme-option">
						<span>
						Sidebar Style </span>
                        <select class="sidebar-style-option form-control input-sm">
                            <option value="default" selected="selected">Default</option>
                            <option value="light">Light</option>
                        </select>
                    </div>
                    <div class="theme-option">
						<span>
						Sidebar Position </span>
                        <select class="sidebar-pos-option form-control input-sm">
                            <option value="left" selected="selected">Left</option>
                            <option value="right">Right</option>
                        </select>
                    </div>
                    <div class="theme-option">
						<span>
						Footer </span>
                        <select class="page-footer-option form-control input-sm">
                            <option value="fixed">Fixed</option>
                            <option value="default" selected="selected">Default</option>
                        </select>
                    </div>
                </div>
            </div>
            <!-- END STYLE CUSTOMIZER -->
            <!-- BEGIN PAGE HEADER-->
            <h3 class="page-title">
                Editable Datatables <small>editable datatable samples</small>
            </h3>
            <div class="page-bar">
                <ul class="page-breadcrumb">
                    <li>
                        <i class="fa fa-home"></i>
                        <a href="index.html">Home</a>
                        <i class="fa fa-angle-right"></i>
                    </li>
                    <li>
                        <a href="#">Data Tables</a>
                        <i class="fa fa-angle-right"></i>
                    </li>
                    <li>
                        <a href="#">Editable Datatables</a>
                    </li>
                </ul>
                <div class="page-toolbar">
                    <div class="btn-group pull-right">
                        <button type="button" class="btn btn-fit-height grey-salt dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-delay="1000" data-close-others="true">
                            Actions <i class="fa fa-angle-down"></i>
                        </button>
                        <ul class="dropdown-menu pull-right" role="menu">
                            <li>
                                <a href="#">Action</a>
                            </li>
                            <li>
                                <a href="#">Another action</a>
                            </li>
                            <li>
                                <a href="#">Something else here</a>
                            </li>
                            <li class="divider">
                            </li>
                            <li>
                                <a href="#">Separated link</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!-- END PAGE HEADER-->
            <!-- BEGIN PAGE CONTENT-->
            <div class="row">
                <div class="col-md-12">
                    <!-- BEGIN EXAMPLE TABLE PORTLET-->
                    <div class="portlet box blue">
                        <div class="portlet-title">
                            <div class="caption">
                                <i class="fa fa-edit"></i>Editable Table
                            </div>
                            <div class="tools">
                                <a href="javascript:;" class="collapse">
                                </a>
                                <a href="#portlet-config" data-toggle="modal" class="config">
                                </a>
                                <a href="javascript:;" class="reload">
                                </a>
                                <a href="javascript:;" class="remove">
                                </a>
                            </div>
                        </div>
                        <div class="portlet-body">
                            <div class="table-toolbar">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="btn-group">
                                            <button id="sample_editable_1_new" class="btn yellow">
                                                新加一行 <i class="fa fa-plus"></i>
                                            </button>



                                        </div>


                                        <div class="btn-group">
                                            <button class="btn red" onclick="mergeJsonSync();">
                                                合并JASON & 同步 <i class="fa fa-plus"></i>
                                            </button>



                                        </div>



                                        <div class="btn-group">
                                            <button id="import_excel_div" class="btn green" onclick="pop_win();" >
                                                导入excel <i class="fa fa-plus"></i>
                                            </button>
                                            <form id='myForm' action="/json/importExcel/" method="post" enctype="multipart/form-data" >

                                                <input type="file" id="import_excel" name="import_excel" onChange="up_file();" />

                                                <input type="hidden" name="type" value="{$type}" />
                                            </form>

                                        </div>



                                    </div>


                                    <script>



                                        var options = {
                                            url: "/json/importExcel/", //提交地址：默认是form的action,如果申明,则会覆盖
                                            type: "post",   //默认是form的method（get or post），如果申明，则会覆盖
                                            // beforeSubmit: beforeCheck, //提交前的回调函数
                                            // success: successfun,  //提交成功后的回调函数
                                            // target: "#output",  //把服务器返回的内容放入id为output的元素中
                                            // dataType: "json", //html(默认), xml, script, json...接受服务端返回的类型
                                            clearForm: true,  //成功提交后，是否清除所有表单元素的值
                                            resetForm: true,  //成功提交后，是否重置所有表单元素的值
                                            timeout: 10000     //限制请求的时间，当请求大于3秒后，跳出请求
                                        };


                                        function pop_win(){
                                            $("#import_excel").click();
                                        }

                                        function up_file(){
                                            console.log(111);

                                            $("#myForm").ajaxSubmit(options);

                                            // alert(44);

                                        }

                                        $("#import_excel").hide();


                                        function mergeJsonSync(){
                                            $.ajax({
                                                type: "GET",
                                                url: "/json/mergeJson/",
                                                data: {username:1},
                                                dataType: "json",
                                                success: function(data){


                                                    alert(data);
                                                }

                                            });
                                        }


                                    </script>


                                    <!--<div class="col-md-6">-->
                                    <!--<div class="btn-group pull-right">-->
                                    <!--<button class="btn dropdown-toggle" data-toggle="dropdown">Tools <i class="fa fa-angle-down"></i>-->
                                    <!--</button>-->
                                    <!--<ul class="dropdown-menu pull-right">-->
                                    <!--<li>-->
                                    <!--<a href="javascript:;">-->
                                    <!--Print </a>-->
                                    <!--</li>-->
                                    <!--<li>-->
                                    <!--<a href="javascript:;">-->
                                    <!--Save as PDF </a>-->
                                    <!--</li>-->
                                    <!--<li>-->
                                    <!--<a href="javascript:;">-->
                                    <!--Export to Excel </a>-->
                                    <!--</li>-->
                                    <!--</ul>-->
                                    <!--</div>-->
                                    <!--</div>-->
                                </div>
                            </div>
                            <table class="table table-striped table-hover table-bordered" id="sample_editable_1">
                                <thead>
                                <tr>
                                    {foreach ($jsondesc['field'] as $k=>$v) }
                                    <th>{$k}/{$v}</th>
                                    {/foreach}
                                    <th>编辑</th><td>删除</td>
                                </tr>
                                </thead>
                                <tbody>

                                {if $content}
                                {foreach ($content as $k=>$v) }

                                <tr>
                                    {foreach ($jsondesc['field'] as $k2=>$v2) }
                                        <td class="center">{$v[$k2]}</td>
                                    {/foreach}




                                    <td>
                                        <a class="edit" href="javascript:;">
                                            Edit </a>
                                    </td>
                                    <td>
                                        <a class="delete" href="javascript:;">
                                            Delete </a>
                                    </td>
                                </tr>
                                {/foreach}
                                {else}
                                无数据
                                {/if}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- END EXAMPLE TABLE PORTLET-->
                </div>
            </div>
            <!-- END PAGE CONTENT -->
        </div>
    </div>
    <!-- END PAGE CONTENT-->
    <!-- END CONTENT -->
</div>
<!-- END CONTAINER -->

<script>

    jQuery(document).ready(function() {


        // Metronic.init(); // init metronic core components
        // Layout.init(); // init current layout
        // QuickSidebar.init(); // init quick sidebar
        // Demo.init(); // init demo features


        TableEditable.init();



    });


</script>